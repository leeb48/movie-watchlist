version: "3"
services:
  # postgres:
  #   image: postgres
  #   restart: always
  #   environment:
  #     - "POSTGRES_USER=postgres"
  #     - "POSTGRES_PASSWORD=postgres"
  #     - "POSTGRES_DB=movie-watchlist"
  #     - "PGDATA=/var/lib/postgresql/data"
  #   volumes:
  #     - db-data:/var/lib/postgresql/data
  #   ports:
  #     - "5432:5432"

  # pgadmin:
  #   image: dpage/pgadmin4
  #   restart: always
  #   environment:
  #     - "PGADMIN_DEFAULT_EMAIL=bongster228@hotmail.com"
  #     - "PGADMIN_DEFAULT_PASSWORD=postgres"
  #     - "PGADMIN_LISTEN_PORT=80"
  #   ports:
  #     - "8080:80"
  #   volumes:
  #     - pgadmin-data:/var/lib/pgadmin
  #   depends_on:
  #     - postgres
  #   links:
  #     - "postgres"

  # api:
  #   build:
  #     dockerfile: Dockerfile.dev
  #     context: ./api
  #   ports:
  #     - "5000:5000"
  #   volumes:
  #     - /app/node_modules
  #     - /app/dist
  #     - ./api:/app
  #   environment:
  #     DB_HOST: postgres
  #     DB_PORT: 5432
  #     DB_USERNAME: postgres
  #     DB_PASSWORD: postgres
  #     DB_NAME: movie-watchlist
  #     SYNC: "true"
  #     JWT_SECRET: movie-watchlist
  #     JWT_EXPIRE_TIME: 3600
  #     OAUTH_CLIENT_ID: 829553638037-1kfopki4r9qeaqjd7qi7j660eqmbv9si.apps.googleusercontent.com
  #     OAUTH_SECRET: yVrAtQtbjPfJPT0C_FYEWkGC
  #     MOVIEDB_TOKEN: eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxNjRkZmRlNzBlMzg2MTU2NDgxZDcxYjBkYjQyNGU3ZiIsInN1YiI6IjVlOGQxZGI0Y2U5OTdhMDAxN2I4M2QzZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.W3kfx4m8048H02EGsJWbBZVETGuE3joQGgUJGwgtAYY
  #   depends_on:
  #     - postgres
  #   command:
  #     ["./wait-for-it.sh", "postgres:5432", "--", "npm", "run", "start:dev"]
  #   links:
  #     - "postgres"

  client:
    stdin_open: true
    build:
      dockerfile: Dockerfile.dev
      context: ./client
    ports:
      - "3000:3000"
    volumes:
      - /app/node_modules
      - ./client:/app
    # links:
    #   - "api"

volumes:
  db-data:
  pgadmin-data:
